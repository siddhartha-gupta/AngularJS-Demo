var services=angular.module("services",[]),controllers=angular.module("controllers",[]),directives=angular.module("directives",[]),app;!function(e){"use strict";var t=function(){function e(){}return Object.defineProperty(e,"Default",{get:function(){return{serverUrl:"http://localhost:8080/",templateUrl:"../templates/"}},enumerable:!0,configurable:!0}),e}();e.Constants=t}(app||(app={}));var app;!function(e){"use strict";var t=function(){function t(t){t.when("/userslist",{templateUrl:e.Constants.Default.templateUrl+"usersList.html",controller:"UsersListController",controllerAs:"customController"}).when("/addUser",{controller:"AddUserController",controllerAs:"customController",templateUrl:e.Constants.Default.templateUrl+"addUser.html"}).otherwise({redirectTo:"/userslist"})}return t.$inject=["$routeProvider"],t}();e.Config=t}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e,t,r){e.Utils={keys:Object.keys},e.$on("$routeChangeStart",function(e,t,o){r.broadcastEvent("routeChangeStart",{next:t,current:o})}),e.$on("$routeChangeSuccess",function(e,t,o){r.broadcastEvent("routeChangeSuccess",{next:t,current:o})}),e.$on("$routeChangeError",function(e,t,o){r.broadcastEvent("routeChangeError",{next:t,current:o})})}return e.inject=["$rootScope","$location","sharedService"],e}();e.RouteHandler=t}(app||(app={}));var app;!function(e){"use strict"}(app||(app={}));var app;!function(e){"use strict"}(app||(app={})),controllers.controller("AddUserController",app.AddUserController);var app;!function(e){"use strict"}(app||(app={}));var app;!function(e){"use strict"}(app||(app={}));var app;!function(e){"use strict"}(app||(app={}));var app;!function(e){"use strict"}(app||(app={}));var app;!function(e){"use strict"}(app||(app={}));var app;!function(e){"use strict"}(app||(app={}));var app;!function(e){"use strict";var t=function(){function e(e,t,r,o,i){this.$scope=e,this.$location=t,this.$window=r,this.$log=o,this.sharedService=i,e.$on("routeChangeStart",this.onRouteChangeStart.bind(this)),e.$on("routeChangeSuccess",this.onRouteChangeSuccess.bind(this)),e.$on("routeChangeError",this.onRouteChangeError.bind(this)),this.heading="User management",this.headerLeftBtn={showBtn:!1,clickFunc:"",text:""},this.headerRightBtn={showBtn:!1,clickFunc:"",text:""}}return e.prototype.onRouteChangeStart=function(e,t){},e.prototype.onRouteChangeSuccess=function(e,t){if(t.next&&t.next.$$route&&t.next.$$route.controller)switch(t.next.$$route.controller){case"UsersListController":this.setUserListHeader();break;case"AddUserController":this.setAddUserHeader()}else this.setUserListHeader()},e.prototype.onRouteChangeError=function(e,t){},e.prototype.setUserListHeader=function(){this.headerLeftBtn={showBtn:!1,clickFunc:"",text:""},this.headerRightBtn={showBtn:!0,clickFunc:"goToAddUser",text:"Add user"}},e.prototype.setAddUserHeader=function(){this.headerLeftBtn={showBtn:!0,clickFunc:"goBack",text:"Back"},this.headerRightBtn={showBtn:!1,clickFunc:"",text:""}},e.prototype.callFunction=function(e,t){e.preventDefault(),angular.isFunction(this[t])&&this[t]()},e.prototype.goToAddUser=function(){this.$location.path("/addUser").replace()},e.prototype.addUser=function(){this.sharedService.broadcastEvent("add-user",{})},e.prototype.goBack=function(){event.preventDefault(),this.$location.path("/userslist").replace()},e.$inject=["$scope","$location","$window","$log","SharedService"],e}();e.HeaderController=t}(app||(app={})),controllers.controller("HeaderController",app.HeaderController);var app;!function(e){"use strict";var t=function(){function t(t,r,o,i,n){this.$scope=t,this.$location=r,this.apiService=o,this.utilsService=i,this.sharedService=n,this.appConfig=e.Constants.Default,this.editUserId="",this.readOnlyMode=!0,this.sortOrder="firstname",this.getUsers(),this.usersList=[],this.editUserDefault(),this.modalDialogueDefault(),this.infoSliderDefault(),this.createtableHeading()}return t.prototype.startEditMode=function(e,t){event&&(event.preventDefault(),event.stopPropagation()),this.readOnlyMode&&(this.readOnlyMode=!1,this.editUserId=t)},t.prototype.cancelEditMode=function(e){e&&(e.preventDefault(),e.stopPropagation()),this.readOnlyMode=!0,this.editUserId=""},t.prototype.createtableHeading=function(){this.tableHeading=[{className:"col-xs-1",sortOrder:"id_member",text:"S.No"},{className:"col-xs-2",sortOrder:"firstname",text:"First name"},{className:"col-xs-2",sortOrder:"lastname",text:"Last name"},{className:"col-xs-3",sortOrder:"email",text:"Email"},{className:"col-xs-2",sortOrder:"phonenumber",text:"Phone Number"},{className:"col-xs-1",sortOrder:"location",text:"Location"}]},t.prototype.dataAvailable=function(){return this.usersList.length>0},t.prototype.getUsers=function(){var e=this;this.apiService.getCall({url:this.appConfig.serverUrl+"getuserslist"}).success(function(t,r){e.processServerData(t)}).error(function(t,r){e.utilsService.log("err")})},t.prototype.processServerData=function(e){this.utilsService.log("processServerData: ",e),e&&e.length>0?this.usersList=e:this.usersList.length=0},t.prototype.addUser=function(){this.$location.path("/addUser").replace()},t.prototype.validateEmail=function(e){console.log("validateEmail")},t.prototype.editUserClick=function(e,t){e&&(e.stopPropagation(),e.preventDefault()),this.utilsService.log("userId: ",t),this.editUser={isVisible:!0,title:"Edit details",userData:this.utilsService.clone(this.utilsService.getObjectFromArr(this.usersList,"id_member",t)),userId:t},this.sharedService.broadcastEvent("show-edit-modal",{id:"editUserModal"}),this.utilsService.log(this.editUser)},t.prototype.updateUserData=function(e,t){var r=this;this.utilsService.log("updateUserData: ",e),this.utilsService.log("userId: ",t),this.apiService.postCall({url:this.appConfig.serverUrl+"updateuser",data:{userId:t,userData:{email:e.email,firstname:e.firstname,id_member:e.id_member,lastname:e.lastname,location:e.location,phonenumber:e.phonenumber}},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){r.utilsService.log("updateUserData success: ",e),r.hideEditPopup(),e.resp===!0?r.onUserUpdated():(r.modalDialogue={isVisible:!0,title:"Error!",body:"We have encountered error while updating user information. Please try again",btn1Txt:"Ok",btn2Txt:"",showBtn2:!1,btn1Callback:r.hideModalDialogue.bind(r),btn2Callback:function(){},closeBtnCallback:r.hideModalDialogue.bind(r)},r.sharedService.broadcastEvent("show-modal",{id:"modalDialogue"}))}).error(function(e){r.utilsService.log("updateUserData error: ",e)})},t.prototype.onUserUpdated=function(){this.showInfoSlider({title:"User updated",body:"User info has been updated successfully",startTimer:500,endTimer:4e3}),this.getUsers()},t.prototype.hideEditPopup=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.sharedService.broadcastEvent("hide-edit-modal",{id:"editUserModal"}),this.editUserDefault()},t.prototype.editUserDefault=function(){this.editUser={isVisible:!1,title:"",userData:{},userId:""}},t.prototype.deleteUserClick=function(e,t){e&&(e.stopPropagation(),e.preventDefault()),this.utilsService.log("userId: ",t),this.modalDialogue={isVisible:!0,title:"Delete user?",body:"Please confirm, you want to delete the user",btn1Txt:"Ok",btn2Txt:"Cancel",showBtn2:!0,btn1Callback:this.deleteUserConfirm.bind(this,t),btn2Callback:this.hideModalDialogue.bind(this),closeBtnCallback:this.hideModalDialogue.bind(this)},this.sharedService.broadcastEvent("show-modal",{id:"modalDialogue"})},t.prototype.deleteUserConfirm=function(e){var t=this;this.utilsService.log("deleteUserConfirm, userId: ",e),this.apiService.postCall({url:this.appConfig.serverUrl+"deleteuser",data:{userId:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){t.utilsService.log("success: ",e),e.resp===!0?t.onUserDeleted():t.modalDialogue={isVisible:!0,title:"Error!",body:"We have encountered error while deleting user. Please try again",btn1Txt:"Ok",btn2Txt:"",showBtn2:!1,btn1Callback:t.hideModalDialogue.bind(t),btn2Callback:function(){},closeBtnCallback:t.hideModalDialogue.bind(t)}}).error(function(e){t.utilsService.log("error: ",e)})},t.prototype.onUserDeleted=function(){this.hideModalDialogue(),this.showInfoSlider({title:"User deleted",body:"User has been deleted successfully",startTimer:500,endTimer:4e3}),this.getUsers()},t.prototype.hideModalDialogue=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.sharedService.broadcastEvent("hide-modal",{id:"modalDialogue"}),this.modalDialogueDefault()},t.prototype.modalDialogueDefault=function(){this.modalDialogue={isVisible:!1,title:"",body:"",btn1Txt:"",btn2Txt:"",showBtn2:!1,btn1Callback:function(){},btn2Callback:function(){},closeBtnCallback:function(){}}},t.prototype.manageSortOrder=function(e){e===this.sortOrder?this.sortOrder="-"+e:this.sortOrder=e},t.prototype.showInfoSlider=function(e){var t=this;this.infoSlider={title:e.title,body:e.body},setTimeout(function(){t.sharedService.broadcastEvent("show-info-slider",{id:"infoSlider"})},e.startTimer),setTimeout(function(){t.hideInfoSlider()},e.endTimer)},t.prototype.hideInfoSlider=function(){this.sharedService.broadcastEvent("hide-info-slider",{id:"infoSlider"}),this.infoSliderDefault()},t.prototype.infoSliderDefault=function(){this.infoSlider={title:"",body:""}},t.$inject=["$scope","$location","APIService","UtilsService","SharedService"],t}();e.UsersListController=t}(app||(app={})),controllers.controller("UsersListController",app.UsersListController);var app;!function(e){"use strict";var t=function(){function t(t,r,o,i,n){this.$scope=t,this.$location=r,this.apiService=o,this.utilsService=i,this.sharedService=n,t.$on("add-user",function(e,t){this.addUser()}),this.appConfig=e.Constants.Default,this.validEmail=!1,this.userDataDefault(),this.modalDialogueDefault()}return t.prototype.validateEmail=function(e){this.validEmail=this.utilsService.validateEmail(e)},t.prototype.validateForm=function(){return this.utilsService.isNullUndefined(this.userData.firstname)||this.utilsService.isNullUndefined(this.userData.lastname)?(this.showModalDialogue("inValidForm-name"),!1):this.utilsService.isNullUndefined(this.userData.email)?(this.showModalDialogue("inValidForm-email"),!1):this.utilsService.isNullUndefined(this.userData.phonenumber)?(this.showModalDialogue("inValidForm-phonenumber"),!1):this.utilsService.isNullUndefined(this.userData.location)?(this.showModalDialogue("inValidForm-location"),!1):!0},t.prototype.gotoUserList=function(){this.$location.path("/userslist").replace()},t.prototype.addUser=function(){var e=this;this.utilsService.log("add user: ",this.userData),this.validateForm()&&this.apiService.postCall({url:this.appConfig.serverUrl+"adduser",data:this.userData}).success(function(t){e.utilsService.log("success: ",t),t&&t.resp&&"Email already in use"===t.resp?e.showModalDialogue("emailInUse"):e.gotoUserList()}).error(function(t){e.utilsService.log("error: ",t)})},t.prototype.userDataDefault=function(){this.userData={firstname:"",lastname:"",email:"",phonenumber:"",location:"IN"}},t.prototype.showModalDialogue=function(e){var t="",r="";switch(e){case"emailInUse":t="Email already in use",r="Email ID is already in use, please enter a unique Email address";break;case"inValidForm-name":t="Incomplete form",r="Please fill First name/Last name";break;case"inValidForm-email":t="Incomplete form",r="Please fill the email address";break;case"inValidForm-phonenumber":t="Incomplete form",r="Please fill phone number";break;case"inValidForm-location":t="Incomplete form",r="Please select location"}this.sharedService.broadcastEvent("show-modal",{id:"modalDialogue"}),this.modalDialogue={isVisible:!0,title:t,body:r,btn1Txt:"Ok",btn2Txt:"",showBtn2:!1,btn1Callback:this.hideModalDialogue.bind(this),btn2Callback:function(){},closeBtnCallback:this.hideModalDialogue.bind(this)}},t.prototype.hideModalDialogue=function(e){e&&(e.stopPropagation(),e.preventDefault()),this.sharedService.broadcastEvent("hide-modal",{id:"modalDialogue"}),this.modalDialogueDefault()},t.prototype.modalDialogueDefault=function(){this.modalDialogue={isVisible:!1,title:"",body:"",btn1Txt:"",btn2Txt:"",showBtn2:!1,btn1Callback:function(){},btn2Callback:function(){},closeBtnCallback:function(){}}},t.$inject=["$scope","$location","APIService","UtilsService","SharedService"],t}();e.AddUserController=t}(app||(app={})),controllers.controller("AddUserController",app.AddUserController);var app;!function(e){"use strict";var t=function(){function e(){}return e}();e.EditUserController=t}(app||(app={})),controllers.controller("EditUserController",app.EditUserController);var app;!function(e){"use strict";var t=function(){function e(){}return e}();e.ModalDialogueController=t}(app||(app={})),controllers.controller("ModalDialogueController",app.ModalDialogueController);var app;!function(e){"use strict";var t=function(){function e(){}return e.prototype.onFormSubmit=function(e){e&&(e.preventDefault(),e.stopPropagation()),console.log("onFormSubmit"),this.formSubmit({data:this.userData,userDataId:this.userDataId})},e}();e.UserFormController=t}(app||(app={})),controllers.controller("UserFormController",app.UserFormController);var app;!function(e){"use strict";var t=function(){function e(e){this.$element=e,this.defaultClass="arrow arrow-down",this.lastSortOrder=""}return e.prototype.manageSortOrder=function(e,t){e&&(e.preventDefault(),e.stopPropagation());var r="arrow arrow-up";angular.element(e.target).find("span").hasClass("arrow-up")&&(r="arrow arrow-down"),this.lastSortOrder!==t&&(angular.element("#heading_"+this.lastSortOrder).find("span").removeClass().addClass(this.defaultClass),this.lastSortOrder=t),angular.element(e.target).find("span").removeClass().addClass(r),this.sortFunc({orderBy:t})},e.$inject=["$element"],e}();e.TableHeaderController=t}(app||(app={})),controllers.controller("TableHeaderController",app.TableHeaderController);var app;!function(e){"use strict";var t=function(){function e(){}return e}();e.InfoSliderController=t}(app||(app={})),controllers.controller("InfoSliderController",app.InfoSliderController);var app;!function(e){"use strict";var t=function(){function t(){this.restrict="E",this.scope={isVisible:"=",title:"=",userData:"=",userId:"=",hidePopup:"&",updateData:"&",discardForm:"&"},this.templateUrl=e.Constants.Default.templateUrl+"directives/edit-user.directive.html",this.controller="EditUserController",this.controllerAs="customController",this.bindToController=!0}return t.prototype.link=function(e){e.$on("show-edit-modal",function(e,t){angular.element(document.getElementById(t.id)).modal("show")}),e.$on("hide-edit-modal",function(e,t){angular.element(document.getElementById(t.id)).modal("hide")})},t.factory=function(){return function(){return new t}},t}();e.EditUserDirective=t}(app||(app={})),directives.directive("editUser",app.EditUserDirective.factory());var app;!function(e){"use strict";var t=function(){function t(){this.restrict="E",this.scope={isVisible:"=",title:"=",body:"=",btn1Txt:"=",btn2Txt:"=",showBtn2:"=",btn1Callback:"&",btn2Callback:"&",closeBtnCallback:"&"},this.templateUrl=e.Constants.Default.templateUrl+"directives/modal-dialogue.directive.html",this.controller="ModalDialogueController",this.controllerAs="customController",this.bindToController=!0}return t.prototype.link=function(e){e.$on("show-modal",function(e,t){angular.element(document.getElementById(t.id)).modal("show")}),e.$on("hide-modal",function(e,t){angular.element(document.getElementById(t.id)).modal("hide")})},t.factory=function(){return function(){return new t}},t}();e.ModalDialogueDirective=t}(app||(app={})),directives.directive("modalDialogue",app.ModalDialogueDirective.factory());var app;!function(e){"use strict";var t=function(){function t(){this.restrict="E",this.scope={userData:"=",userId:"=",editMode:"=",validateEmail:"&",formSubmit:"&",discardForm:"&"},this.templateUrl=e.Constants.Default.templateUrl+"directives/user-form.directive.html",this.controller="UserFormController",this.controllerAs="customController",this.bindToController=!0}return t.factory=function(){return function(){return new t}},t}();e.UserFormDirective=t}(app||(app={})),directives.directive("userForm",app.UserFormDirective.factory());var app;!function(e){"use strict";var t=function(){function t(){this.restrict="E",this.scope={tableHeading:"=",sortFunc:"&"},this.templateUrl=e.Constants.Default.templateUrl+"directives/table-header.directive.html",this.controller="TableHeaderController",this.controllerAs="customController",this.bindToController=!0}return t.factory=function(){return function(){return new t}},t}();e.TableHeaderDirective=t}(app||(app={})),directives.directive("tableHeader",app.TableHeaderDirective.factory());var app;!function(e){"use strict";var t=function(){function t(){this.restrict="E",this.scope={title:"=",body:"="},this.templateUrl=e.Constants.Default.templateUrl+"directives/info-slider.directive.html",this.controller="InfoSliderController",this.controllerAs="customController",this.bindToController=!0}return t.prototype.link=function(e){e.$on("show-info-slider",function(e,t){angular.element(document.getElementById(t.id)).modal("show")}),e.$on("hide-info-slider",function(e,t){angular.element(document.getElementById(t.id)).modal("hide")})},t.factory=function(){return function(){return new t}},t}();e.InfoSliderDirective=t}(app||(app={})),directives.directive("infoSlider",app.InfoSliderDirective.factory());var app;!function(e){"use strict";var t=function(){function e(e){this.$http=e,this.httpService=e}return e.prototype.getCall=function(e){e.config||{};return this.httpService.get(e.url,e)},e.prototype.postCall=function(e){return console.log("params: ",e),this.httpService.post(e.url,e.data,{headers:e.headers})},e.$inject=["$http"],e}();e.APIService=t}(app||(app={})),services.service("APIService",app.APIService);var app;!function(e){"use strict";var t=function(){function e(e){this.$rootScope=e,this.broadcastEvent=function(e,t){this.$rootScope.$broadcast(e,t)}}return e.$inject=["$rootScope"],e}();e.SharedService=t}(app||(app={})),services.service("SharedService",app.SharedService);var app;!function(e){"use strict";var t=function(){function e(){}return e.prototype.getDataType=function(e){return{}.toString.call(e).toLowerCase()},e.prototype.isNullUndefined=function(e,t){var r=!1,o=this.getDataType(e);switch(o){case"[object array]":0===e.length&&(r=!0);break;case"[object object]":0===Object.keys(e).length&&(r=!0);break;default:"undefined"==typeof e||null===e||""===e||"null"===e||"undefined"===e?r=!0:t&&(0===e||isNaN(e))&&(r=!0)}return r},e.prototype.clone=function(e){if(null==e||"object"!=typeof e)return e;var t=new e.constructor;for(var r in e)t[r]=this.clone(e[r]);return t},e.prototype.validateEmail=function(e){var t=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;return!(!e||!t.test(e))},e.prototype.getObjectFromArr=function(e,t,r){for(var o=0;o<e.length;o++)if(e[o][t]==r)return e[o]},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];console.log.apply(console,arguments)},e}();e.UtilsService=t}(app||(app={})),services.service("UtilsService",app.UtilsService);var app;!function(e){e.formApp=angular.module("formApp",["ngRoute","controllers","services","directives"]),e.formApp.config(e.Config),e.formApp.run(["$rootScope","$location","SharedService",e.RouteHandler])}(app||(app={}));
//# sourceMappingURL=all.min.js.map
