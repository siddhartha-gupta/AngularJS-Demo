var services=angular.module("services",[]),controllers=angular.module("controllers",[]),directives=angular.module("directives",[]),app;!function(t){"use strict";var e=function(){function t(){}return Object.defineProperty(t,"Default",{get:function(){return{serverUrl:"http://localhost:8080/",templateUrl:"../templates/"}},enumerable:!0,configurable:!0}),t}();t.Constants=e}(app||(app={}));var app;!function(t){"use strict";var e=function(){function e(e){e.when("/userslist",{templateUrl:t.Constants.Default.templateUrl+"usersList.html",controller:"UsersListController",controllerAs:"customController"}).when("/addUser",{controller:"AddUserController",controllerAs:"customController",templateUrl:t.Constants.Default.templateUrl+"addUser.html"}).otherwise({redirectTo:"/userslist"})}return e.$inject=["$routeProvider"],e}();t.Config=e}(app||(app={}));var app;!function(t){"use strict";var e=function(){function t(t,e,r){t.Utils={keys:Object.keys},t.$on("$routeChangeStart",function(t,e,i){r.broadcastEvent("routeChangeStart",{next:e,current:i})}),t.$on("$routeChangeSuccess",function(t,e,i){r.broadcastEvent("routeChangeSuccess",{next:e,current:i})}),t.$on("$routeChangeError",function(t,e,i){r.broadcastEvent("routeChangeError",{next:e,current:i})})}return t.inject=["$rootScope","$location","sharedService"],t}();t.RouteHandler=e}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict"}(app||(app={}));var app;!function(t){"use strict";var e=function(){function t(t,e,r,i,o){this.$scope=t,this.$location=e,this.$window=r,this.$log=i,this.sharedService=o,t.$on("routeChangeStart",this.onRouteChangeStart.bind(this)),t.$on("routeChangeSuccess",this.onRouteChangeSuccess.bind(this)),t.$on("routeChangeError",this.onRouteChangeError.bind(this)),this.heading="User management",this.headerLeftBtn={showBtn:!1,clickFunc:"",text:""},this.headerRightBtn={showBtn:!1,clickFunc:"",text:""}}return t.prototype.onRouteChangeStart=function(t,e){},t.prototype.onRouteChangeSuccess=function(t,e){if(e.next&&e.next.$$route&&e.next.$$route.controller)switch(e.next.$$route.controller){case"UsersListController":this.setUserListHeader();break;case"AddUserController":this.setAddUserHeader()}else this.setUserListHeader()},t.prototype.onRouteChangeError=function(t,e){},t.prototype.setUserListHeader=function(){this.headerLeftBtn={showBtn:!1,clickFunc:"",text:""},this.headerRightBtn={showBtn:!0,clickFunc:"goToAddUser",text:"Add user"}},t.prototype.setAddUserHeader=function(){this.headerLeftBtn={showBtn:!0,clickFunc:"goBack",text:"Back"},this.headerRightBtn={showBtn:!1,clickFunc:"",text:""}},t.prototype.callFunction=function(t,e){t.preventDefault(),angular.isFunction(this[e])&&this[e]()},t.prototype.goToAddUser=function(){this.$location.path("/addUser").replace()},t.prototype.addUser=function(){this.sharedService.broadcastEvent("add-user",{})},t.prototype.goBack=function(){event.preventDefault(),this.$location.path("/userslist").replace()},t.$inject=["$scope","$location","$window","$log","SharedService"],t}();t.HeaderController=e}(app||(app={})),controllers.controller("HeaderController",app.HeaderController);var app;!function(t){"use strict";var e=function(){function e(e,r,i,o,n){this.$scope=e,this.$location=r,this.apiService=i,this.utilsService=o,this.sharedService=n,this.appConfig=t.Constants.Default,this.sortOrder="-id_member",this.getUsers(),this.usersList=[],this.editUserDefault(),this.modalDialogueDefault(),this.infoSliderDefault(),this.createtableHeading()}return e.prototype.getUsers=function(){var t=this;this.apiService.getCall({url:this.appConfig.serverUrl+"getuserslist"}).success(function(e,r){t.processServerData(e)}).error(function(e,r){t.utilsService.log("err")})},e.prototype.processServerData=function(t){this.utilsService.log("processServerData: ",t),t&&t.length>0?this.usersList=t:this.usersList.length=0},e.prototype.addUser=function(){this.$location.path("/addUser").replace()},e.prototype.actionHandler=function(t,e,r){switch(t){case"edit":this.editUserClick(e);break;case"delete":this.deleteUserClick(e);break;case"save":this.updateUserData(r,e)}},e.prototype.validateEmail=function(t){this.utilsService.log("validateEmail")},e.prototype.editUserClick=function(t){this.utilsService.log("userId: ",t),this.editUser={isVisible:!0,title:"Edit details",userData:this.utilsService.clone(this.utilsService.getObjectFromArr(this.usersList,"id_member",t)),userId:t},this.sharedService.broadcastEvent("show-edit-modal",{}),this.utilsService.log(this.editUser)},e.prototype.updateUserData=function(t,e){var r=this;this.utilsService.log("updateUserData: ",t),this.utilsService.log("userId: ",e),this.apiService.postCall({url:this.appConfig.serverUrl+"updateuser",data:{userId:e,userData:{email:t.email,firstname:t.firstname,id_member:t.id_member,lastname:t.lastname,location:t.location,phonenumber:t.phonenumber}},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){r.utilsService.log("updateUserData success: ",t),r.onUserUpdateResp(t.resp)}).error(function(t){r.utilsService.log("updateUserData error: ",t)})},e.prototype.onUserUpdateResp=function(t){this.hideEditPopup(),t===!0?(this.showInfoSlider({title:"User updated",body:"User info has been updated successfully",startTimer:500,endTimer:4e3}),this.getUsers()):(this.modalDialogue={isVisible:!0,title:"Error!",body:"We have encountered error while updating user information. Please try again",btn1Txt:"Ok",btn2Txt:"",showBtn2:!1,btn1Callback:this.hideModalDialogue.bind(this),btn2Callback:function(){},closeBtnCallback:this.hideModalDialogue.bind(this)},this.sharedService.broadcastEvent("show-modal",{}))},e.prototype.deleteUserClick=function(t){this.utilsService.log("userId: ",t),this.modalDialogue={isVisible:!0,title:"Delete user?",body:"Please confirm, you want to delete the user",btn1Txt:"Ok",btn2Txt:"Cancel",showBtn2:!0,btn1Callback:this.deleteUserConfirm.bind(this,t),btn2Callback:this.hideModalDialogue.bind(this),closeBtnCallback:this.hideModalDialogue.bind(this)},this.sharedService.broadcastEvent("show-modal",{})},e.prototype.deleteUserConfirm=function(t){var e=this;this.utilsService.log("deleteUserConfirm, userId: ",t),this.apiService.postCall({url:this.appConfig.serverUrl+"deleteuser",data:{userId:t},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){e.utilsService.log("success: ",t),e.onUserDeleted(t.resp)}).error(function(t){e.utilsService.log("error: ",t)})},e.prototype.onUserDeleted=function(t){t===!0?(this.hideModalDialogue(),this.showInfoSlider({title:"User deleted",body:"User has been deleted successfully",startTimer:500,endTimer:4e3}),this.getUsers()):this.modalDialogue={isVisible:!0,title:"Error!",body:"We have encountered error while deleting user. Please try again",btn1Txt:"Ok",btn2Txt:"",showBtn2:!1,btn1Callback:this.hideModalDialogue.bind(this),btn2Callback:function(){},closeBtnCallback:this.hideModalDialogue.bind(this)}},e.prototype.hideEditPopup=function(t){t&&(t.stopPropagation(),t.preventDefault()),this.sharedService.broadcastEvent("hide-edit-modal",{}),this.editUserDefault()},e.prototype.hideModalDialogue=function(t){t&&(t.stopPropagation(),t.preventDefault()),this.sharedService.broadcastEvent("hide-modal",{}),this.modalDialogueDefault()},e.prototype.manageSortOrder=function(t){t===this.sortOrder?this.sortOrder="-"+t:this.sortOrder=t},e.prototype.showInfoSlider=function(t){var e=this;this.infoSlider={title:t.title,body:t.body},setTimeout(function(){e.sharedService.broadcastEvent("show-info-slider",{})},t.startTimer),setTimeout(function(){e.hideInfoSlider()},t.endTimer)},e.prototype.hideInfoSlider=function(){this.sharedService.broadcastEvent("hide-info-slider",{}),this.infoSliderDefault()},e.prototype.createtableHeading=function(){this.tableHeading=[{className:"col-xs-1",sortOrder:"id_member",text:"S.No"},{className:"col-xs-2",sortOrder:"firstname",text:"First name"},{className:"col-xs-2",sortOrder:"lastname",text:"Last name"},{className:"col-xs-3",sortOrder:"email",text:"Email"},{className:"col-xs-2",sortOrder:"phonenumber",text:"Phone Number"},{className:"col-xs-1",sortOrder:"location",text:"Location"}]},e.prototype.editUserDefault=function(){this.editUser={isVisible:!1,title:"",userData:{},userId:""}},e.prototype.modalDialogueDefault=function(){this.modalDialogue={isVisible:!1,title:"",body:"",btn1Txt:"",btn2Txt:"",showBtn2:!1,btn1Callback:function(){},btn2Callback:function(){},closeBtnCallback:function(){}}},e.prototype.infoSliderDefault=function(){this.infoSlider={title:"",body:""}},e.$inject=["$scope","$location","APIService","UtilsService","SharedService"],e}();t.UsersListController=e}(app||(app={})),controllers.controller("UsersListController",app.UsersListController);var app;!function(t){"use strict";var e=function(){function e(e,r,i,o,n){this.$scope=e,this.$location=r,this.apiService=i,this.utilsService=o,this.sharedService=n,e.$on("add-user",function(t,e){this.addUser()}),this.appConfig=t.Constants.Default,this.validEmail=!1,this.userDataDefault(),this.modalDialogueDefault()}return e.prototype.validateEmail=function(t){this.validEmail=this.utilsService.validateEmail(t)},e.prototype.validateForm=function(){return this.utilsService.isNullUndefined(this.userData.firstname)||this.utilsService.isNullUndefined(this.userData.lastname)?(this.showModalDialogue("inValidForm-name"),!1):this.utilsService.isNullUndefined(this.userData.email)?(this.showModalDialogue("inValidForm-email"),!1):this.utilsService.isNullUndefined(this.userData.phonenumber)?(this.showModalDialogue("inValidForm-phonenumber"),!1):this.utilsService.isNullUndefined(this.userData.location)?(this.showModalDialogue("inValidForm-location"),!1):!0},e.prototype.gotoUserList=function(){this.$location.path("/userslist").replace()},e.prototype.addUser=function(){var t=this;this.utilsService.log("add user: ",this.userData),this.validateForm()&&this.apiService.postCall({url:this.appConfig.serverUrl+"adduser",data:this.userData,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){t.utilsService.log("success: ",e),e&&e.resp&&"Email already in use"===e.resp?t.showModalDialogue("emailInUse"):t.gotoUserList()}).error(function(e){t.utilsService.log("error: ",e)})},e.prototype.userDataDefault=function(){this.userData={firstname:"",lastname:"",email:"",phonenumber:"",location:"IN"}},e.prototype.showModalDialogue=function(t){var e="",r="";switch(t){case"emailInUse":e="Email already in use",r="Email ID is already in use, please enter a unique Email address";break;case"inValidForm-name":e="Incomplete form",r="Please fill First name/Last name";break;case"inValidForm-email":e="Incomplete form",r="Please fill the email address";break;case"inValidForm-phonenumber":e="Incomplete form",r="Please fill phone number";break;case"inValidForm-location":e="Incomplete form",r="Please select location"}this.sharedService.broadcastEvent("show-modal",{}),this.modalDialogue={isVisible:!0,title:e,body:r,btn1Txt:"Ok",btn2Txt:"",showBtn2:!1,btn1Callback:this.hideModalDialogue.bind(this),btn2Callback:function(){},closeBtnCallback:this.hideModalDialogue.bind(this)}},e.prototype.hideModalDialogue=function(t){t&&(t.stopPropagation(),t.preventDefault()),this.sharedService.broadcastEvent("hide-modal",{}),this.modalDialogueDefault()},e.prototype.modalDialogueDefault=function(){this.modalDialogue={isVisible:!1,title:"",body:"",btn1Txt:"",btn2Txt:"",showBtn2:!1,btn1Callback:function(){},btn2Callback:function(){},closeBtnCallback:function(){}}},e.$inject=["$scope","$location","APIService","UtilsService","SharedService"],e}();t.AddUserController=e}(app||(app={})),controllers.controller("AddUserController",app.AddUserController);var app;!function(t){"use strict";var e=function(){function t(){}return t}();t.EditUserController=e}(app||(app={})),controllers.controller("EditUserController",app.EditUserController);var app;!function(t){"use strict";var e=function(){function t(){}return t}();t.ModalDialogueController=e}(app||(app={})),controllers.controller("ModalDialogueController",app.ModalDialogueController);var app;!function(t){"use strict";var e=function(){function t(){}return t.prototype.onFormSubmit=function(t){t&&(t.preventDefault(),t.stopPropagation()),this.formSubmit({data:this.userData,userDataId:this.userDataId})},t}();t.UserFormController=e}(app||(app={})),controllers.controller("UserFormController",app.UserFormController);var app;!function(t){"use strict";var e=function(){function t(t){this.$element=t,this.defaultClass="arrow arrow-down",this.lastSortOrder=""}return t.prototype.manageSortOrder=function(t,e){t&&(t.preventDefault(),t.stopPropagation());var r="arrow arrow-up",i=t.target;this.$element.find(i).find("span").hasClass("arrow-up")&&(r="arrow arrow-down"),this.lastSortOrder!==e&&(this.$element.find("#heading_"+this.lastSortOrder).find("span").removeClass().addClass(this.defaultClass),this.lastSortOrder=e),this.$element.find(i).find("span").removeClass().addClass(r),this.sortFunc({orderBy:e})},t.$inject=["$element"],t}();t.TableHeaderController=e}(app||(app={})),controllers.controller("TableHeaderController",app.TableHeaderController);var app;!function(t){"use strict";var e=function(){function t(){}return t}();t.InfoSliderController=e}(app||(app={})),controllers.controller("InfoSliderController",app.InfoSliderController);var app;!function(t){"use strict";var e=function(){function t(t,e,r,i,o){this.$scope=t,this.$timeout=e,this.$element=r,this.docEventService=i,this.utilsService=o,this.readOnlyMode=!0,this.userEditDataDefault()}return t.prototype.startEditMode=function(t){event&&(event.preventDefault(),event.stopPropagation()),this.readOnlyMode&&(this.readOnlyMode=!1,this.docEventService.bindKeyboardEvent(this.cancelEditMode.bind(this)),this.docEventService.bindMouseEvent(this.onMouseClick.bind(this)))},t.prototype.onMouseClick=function(t){var e=t.target.tagName.toLowerCase();("input"!==e&&"select"!==e||0===this.$element.find(t.target).length)&&this.cancelEditMode(t)},t.prototype.cancelEditMode=function(t,e){var r=this;t&&(t.preventDefault(),t.stopPropagation()),this.docEventService.unbindKeyboardEvent(),this.docEventService.unbindMouseEvent(),this.readOnlyMode=!0,e||(this.$element.find("#firstname").val(this.userData.firstname),this.$element.find("#lastname").val(this.userData.lastname),this.$element.find("#location").val(this.userData.location),this.$timeout(function(){r.$scope.$apply()}))},t.prototype.actionCallback=function(t,e,r){if(t&&(t.preventDefault(),t.stopPropagation()),"save"===e){if(!this.validateForm())return this.userEditDataDefault(),!1;var i={id_member:this.userData.id_member,firstname:this.userEditData.firstname,lastname:this.userEditData.lastname,email:this.userData.email,phonenumber:this.userData.phonenumber,location:this.userEditData.location};console.log(this.userData),this.cancelEditMode(null,!0)}this.actionHandler({type:e,userId:r,userData:i})},t.prototype.validateForm=function(){var t=this.userEditData.firstname,e=this.userEditData.lastname,r=this.userEditData.location;return!(this.utilsService.isNullUndefined(t)||this.utilsService.isNullUndefined(e)||this.utilsService.isNullUndefined(r))},t.prototype.userEditDataDefault=function(){this.userEditData={firstname:this.userData.firstname,lastname:this.userData.lastname,location:this.userData.location}},t.$inject=["$scope","$timeout","$element","DocEventService","UtilsService"],t}();t.UserInfoController=e}(app||(app={})),controllers.controller("UserInfoController",app.UserInfoController);var app;!function(t){"use strict";var e=function(){function e(){this.restrict="E",this.scope={isVisible:"=",title:"=",userData:"=",userId:"=",hidePopup:"&",updateData:"&",discardForm:"&"},this.templateUrl=t.Constants.Default.templateUrl+"directives/edit-user.directive.html",this.controller="EditUserController",this.controllerAs="customController",this.bindToController=!0}return e.prototype.link=function(t,e){t.$on("show-edit-modal",function(t){e.find("#editUserModal").modal("show")}),t.$on("hide-edit-modal",function(t){e.find("#editUserModal").modal("hide")})},e.factory=function(){return function(){return new e}},e}();t.EditUserDirective=e}(app||(app={})),directives.directive("editUser",app.EditUserDirective.factory());var app;!function(t){"use strict";var e=function(){function e(){this.restrict="E",this.scope={isVisible:"=",title:"=",body:"=",btn1Txt:"=",btn2Txt:"=",showBtn2:"=",btn1Callback:"&",btn2Callback:"&",closeBtnCallback:"&"},this.templateUrl=t.Constants.Default.templateUrl+"directives/modal-dialogue.directive.html",this.controller="ModalDialogueController",this.controllerAs="customController",this.bindToController=!0}return e.prototype.link=function(t,e){t.$on("show-modal",function(t){e.find("#modalDialogue").modal("show")}),t.$on("hide-modal",function(t,r){e.find("#modalDialogue").modal("hide")})},e.factory=function(){return function(){return new e}},e}();t.ModalDialogueDirective=e}(app||(app={})),directives.directive("modalDialogue",app.ModalDialogueDirective.factory());var app;!function(t){"use strict";var e=function(){function e(){this.restrict="E",this.scope={userData:"=",userId:"=",editMode:"=",validateEmail:"&",formSubmit:"&",discardForm:"&"},this.templateUrl=t.Constants.Default.templateUrl+"directives/user-form.directive.html",this.controller="UserFormController",this.controllerAs="customController",this.bindToController=!0}return e.factory=function(){return function(){return new e}},e}();t.UserFormDirective=e}(app||(app={})),directives.directive("userForm",app.UserFormDirective.factory());var app;!function(t){"use strict";var e=function(){function e(){this.restrict="E",this.scope={tableHeading:"=",sortFunc:"&"},this.templateUrl=t.Constants.Default.templateUrl+"directives/table-header.directive.html",this.controller="TableHeaderController",this.controllerAs="customController",this.bindToController=!0}return e.factory=function(){return function(){return new e}},e}();t.TableHeaderDirective=e}(app||(app={})),directives.directive("tableHeader",app.TableHeaderDirective.factory());var app;!function(t){"use strict";var e=function(){function e(){this.restrict="E",this.scope={title:"=",body:"="},this.templateUrl=t.Constants.Default.templateUrl+"directives/info-slider.directive.html",this.controller="InfoSliderController",this.controllerAs="customController",this.bindToController=!0}return e.prototype.link=function(t,e){t.$on("show-info-slider",function(t){e.find("#infoSlider").modal("show")}),t.$on("hide-info-slider",function(t){e.find("#infoSlider").modal("hide")})},e.factory=function(){return function(){return new e}},e}();t.InfoSliderDirective=e}(app||(app={})),directives.directive("infoSlider",app.InfoSliderDirective.factory());var app;!function(t){"use strict";var e=function(){function e(){this.restrict="E",this.scope={userData:"=",actionHandler:"&"},this.templateUrl=t.Constants.Default.templateUrl+"directives/user-info.directive.html",this.controller="UserInfoController",this.controllerAs="customController",this.bindToController=!0}return e.prototype.link=function(t){},e.factory=function(){return function(){return new e}},e}();t.UserInfoDirective=e}(app||(app={})),directives.directive("userInfo",app.UserInfoDirective.factory());var app;!function(t){"use strict";var e=function(){function t(t){this.$http=t,this.httpService=t}return t.prototype.getCall=function(t){t.config||{};return this.httpService.get(t.url,t)},t.prototype.postCall=function(t){return this.httpService.post(t.url,t.data,{headers:t.headers})},t.$inject=["$http"],t}();t.APIService=e}(app||(app={})),services.service("APIService",app.APIService);var app;!function(t){"use strict";var e=function(){function t(t){this.$rootScope=t,this.broadcastEvent=function(t,e){this.$rootScope.$broadcast(t,e)}}return t.$inject=["$rootScope"],t}();t.SharedService=e}(app||(app={})),services.service("SharedService",app.SharedService);var app;!function(t){"use strict";var e=function(){function t(){}return t.prototype.getDataType=function(t){return{}.toString.call(t).toLowerCase()},t.prototype.isNullUndefined=function(t,e){var r=!1,i=this.getDataType(t);switch(i){case"[object array]":0===t.length&&(r=!0);break;case"[object object]":0===Object.keys(t).length&&(r=!0);break;default:"undefined"==typeof t||null===t||""===t||"null"===t||"undefined"===t?r=!0:e&&(0===t||isNaN(t))&&(r=!0)}return r},t.prototype.clone=function(t){if(null==t||"object"!=typeof t)return t;var e=new t.constructor;for(var r in t)e[r]=this.clone(t[r]);return e},t.prototype.validateEmail=function(t){var e=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;return!(!t||!e.test(t))},t.prototype.getObjectFromArr=function(t,e,r){for(var i=0;i<t.length;i++)if(t[i][e]==r)return t[i]},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];console.log.apply(console,arguments)},t}();t.UtilsService=e}(app||(app={})),services.service("UtilsService",app.UtilsService);var app;!function(t){"use strict";var e=function(){function t(t){this.$document=t}return t.prototype.bindMouseEvent=function(t){this.$document.on("click",function(e){t(e)})},t.prototype.bindKeyboardEvent=function(t){this.$document.on("keydown keypress",function(e){27===e.which&&t(e)})},t.prototype.unbindMouseEvent=function(){this.$document.off("click")},t.prototype.unbindKeyboardEvent=function(){this.$document.off("keydown keypress")},t.$inject=["$document"],t}();t.DocEventService=e}(app||(app={})),services.service("DocEventService",app.DocEventService);var app;!function(t){t.formApp=angular.module("formApp",["ngRoute","controllers","services","directives"]),t.formApp.config(t.Config),t.formApp.run(["$rootScope","$location","SharedService",t.RouteHandler])}(app||(app={}));
//# sourceMappingURL=all.min.js.map
